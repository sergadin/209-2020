# Структура
зависимости: exceptions <- matrix <- db <- server

Пример работы сервера - в файле servtest.cpp
(make test_server компилирует servtest.cpp и запускает получившийся файл).

Принцип работы клиента ясен: он реагирует на команды
send_matrix, shutdown, cleardbs, exit

Сервер получает сообщение от клиента и сразу же отвечает на него;
возможно, после очередного сообщения он прекращает работу.

# Протокол взаимодействия

Перед каждым отправленным сообщением отправляется его будущая длина в байтах (как int).

Матрица nxm передаётся как 2+n*m int'ов в формате

	<n><m><элементы матрицы nxm слева направо сверху вниз>

## Передача сообщений S->C
любое сообщение от сервера к клиенту хранится в QueryResult и передаётся в виде

	<err_code><err_msg><output>

варианты кодов (в формате enum):
* ERRC_OK: всё в порядке. err_msg пусто, output передаётся как

	<число матриц><матрицы>

в остальных случаях output пуст.

* ERRC_BADISTREAM: неполадки с чтением матрицы (не должно происходить)
* ERRC_BADDATA: данные некорректны (например, матрица отрицательного размера)
* ERRC_SHUTDOWN: либо получена команда завершить работу сервера, либо произошла критическая ошибка, требующая этого.
* ERRC_UNKNOWN: неизвестная ошибка (не должно происходить)

## C->S
сообщение от клиента к серверу -- либо 

	<код запроса, равный Q_STANDARD><матрица>,

либо

	<любой другой код запроса>

варианты кодов (в формате enum):
* Q_STANDARD: стандартное взаимодействие с матрицей (возвращает список матриц, умноженных на данную справа; если он пуст, матрица добавляется в базу данных)
* Q_SHUTDOWN: команда завершить работу сервера
* Q_CLEAR: команда очистить базу данных
